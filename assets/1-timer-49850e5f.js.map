{"version":3,"file":"1-timer-49850e5f.js","sources":["../../src/js/1-timer.js"],"sourcesContent":["// Завдання 1 - Таймер зворотного відліку\n// Виконуй це завдання у файлах 1 - timer.html і 1 - timer.js.\n// Напиши скрипт таймера, який здійснює зворотний відлік до певної дати.\n// Такий таймер може використовуватися у блогах, інтернет - магазинах,\n// сторінках реєстрації подій, під час технічного обслуговування тощо.\n// Подивися демовідео роботи таймера.\n// Елементи інтерфейсу\n\n// Додай в HTML файл розмітку таймера, поля вибору кінцевої дати і кнопку,\n// при кліку на яку таймер повинен запускатися.\n// Додай оформлення елементів інтерфейсу згідно з макетом.\n// Бібліотека flatpickr\n\n// Використовуй бібліотеку flatpickr для того,\n//     щоб дозволити користувачеві кросбраузерно вибрати кінцеву дату і час в \n// одному елементі інтерфейсу.Для того щоб підключити CSS код бібліотеки в проєкт,\n// необхідно додати ще один імпорт, крім того, що описаний в документації.\n\n// Вибір дати\n// Метод onClose() з об'єкта параметрів викликається щоразу під час закриття \n// елемента інтерфейсу, який створює flatpickr. Саме в ньому варто обробляти дату, \n// обрану користувачем. Параметр selectedDates — це масив обраних дат, тому ми \n// беремо перший елемент selectedDates[0].\n// Тобі ця обрана дата буде потрібна в коді і поза межами цього методу onClose().\n// Тому оголоси поза межами методу let змінну, наприклад, userSelectedDate, і після\n//  валідації її в методі onClose() на минуле/майбутнє запиши обрану дату в цю let \n//  змінну.\n\n// Якщо користувач вибрав дату в минулому, покажи window.alert() з текстом \n// \"Please choose a date in the future\" і зроби кнопку «Start» не активною.\n// Якщо користувач вибрав валідну дату (в майбутньому), кнопка «Start» стає \n// активною.\n// Кнопка «Start» повинна бути неактивною доти, доки користувач не вибрав дату\n//  в майбутньому. Зверни увагу, що при обранні валідної дати, не запуску таймера \n//  і обранні потім невалідної дати, кнопка після розблокування має знову стати \n//  неактивною.\n// Натисканням на кнопку «Start» починається зворотний відлік часу до обраної \n// дати з моменту натискання.\n\n\n// Відлік часу\n// Натисканням на кнопку «Start» скрипт повинен обчислювати раз на секунду,\n//  скільки часу залишилось до вказаної дати, і оновлювати інтерфейс таймера,\n//   показуючи чотири цифри: дні, години, хвилини і секунди у форматі xx:xx:xx:xx.\n// Кількість днів може складатися з більше, ніж двох цифр.\n// Таймер повинен зупинятися, коли дійшов до кінцевої дати, \n// тобто залишок часу дорівнює нулю 00:00:00:00.\n// Після запуску таймера натисканням кнопки Старт кнопка Старт і інпут стають \n// неактивним, щоб користувач не міг обрати нову дату, поки йде відлік часу.\n//  Після зупинки таймера інпут стає активним, щоб користувач міг обрати наступну \n//  дату. Кнопка залишається не активною.\n// Для підрахунку значень використовуй готову функцію convertMs, де ms — різниця \n// між кінцевою і поточною датою в мілісекундах.\n   \n// Форматування часу\n// Функція convertMs() повертає об'єкт з розрахованим часом, що залишився \n// до кінцевої дати. Зверни увагу, що вона не форматує результат.\n//  Тобто якщо залишилося 4 хвилини або будь-якої іншої складової часу, \n//  то функція поверне 4, а не 04. В інтерфейсі таймера необхідно додавати 0,\n// якщо в числі менше двох символів. Напиши функцію, наприклад\n// addLeadingZero(value), яка використовує метод рядка padStart() і перед \n// відмальовуванням інтерфейсу форматує значення.\n\n// Бібліотека повідомлень\n// Для відображення повідомлень користувачеві, замість window.alert(),\n// використовуй бібліотеку iziToast. Для того щоб підключити CSS код бібліотеки\n// в проєкт, необхідно додати ще один імпорт, крім того, що описаний у документації.\n// Бібліотека очікує, що її ініціалізують на елементі input[type = \"text\"],\n//     тому ми додали до HTML документа поле input#datetime - picker.\n\n\n// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst datetimePicker = document.getElementById('datetime-picker');\nconst dataStart = document.getElementById('data-start');\nconst elements = {\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]')\n}\n// Оголошуємо змінні для збереження вибраної дати та інтервалу таймера\nlet userSelectedDate = null;\nlet countdownInterval = null;\n\n// Налаштування для flatpickr\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0];\n      if(!userSelectedDate || userSelectedDate <= new Date()) {\n        iziToast.warning({\n                message:\"Please choose a date in the future\"\n               \n                });\n        dataStart.disabled = true;\n      } else{\n        dataStart.disabled = false;\n      }\n    },\n  };\n  // Ініціалізація flatpickr з налаштуваннями\n  flatpickr(datetimePicker, options);\n  // Додавання обробника події на кнопку \"Start\"\n  dataStart.addEventListener('click', () => {\n    if (!userSelectedDate || userSelectedDate <= new Date()) {\n        iziToast.warning({\n            message:\"Please choose a date in the future\"\n        });\n       return;\n    }\n  // Очищення попереднього інтервалу таймера\nclearInterval(countdownInterval);\n// Запуск таймера з оновленням раз на секунду\ncountdownInterval = setInterval(() => {\n    const now = new Date(); // Поточний час\n    const timeLeft = userSelectedDate - now; // Час, що залишився до вибраної дати\n  // Якщо час вичерпано, зупиняємо таймер\n  if(timeLeft <= 0 ) {\n    clearInterval(countdownInterval);\n    dataStart.disabled = false; // Активізація кнопки \"Start\"\n    datetimePicker.disabled = false; // Активізація поля вибору дати\n    return;\n  }\n  // Розрахунок днів, годин, хвилин та секунд, що залишилися\n  const {days, hours, minutes, seconds} = convertMs(timeLeft);\n  // Оновлення значень на екрані\n  elements.days.textContent = addLeadingZero(days);\n  elements.hours.textContent = addLeadingZero(hours);\n  elements.minutes.textContent = addLeadingZero(minutes);\n  elements.seconds.textContent = addLeadingZero(seconds);\n   }, 1000);\ndataStart.disabled = true; // Деактивація кнопки \"Start\" під час таймера\ndatetimePicker.disabled = true; // Деактивація поля вибору дати під час таймера\n  });\n  // Функція для перетворення мілісекунд у дні, години, хвилини та секунди\n    function convertMs(ms) {\n    // Number of milliseconds per unit of time\n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n  \n    // Remaining days\n    const days = Math.floor(ms / day);\n    // Remaining hours\n    const hours = Math.floor((ms % day) / hour);\n    // Remaining minutes\n    const minutes = Math.floor(((ms % day) % hour) / minute);\n    // Remaining seconds\n    const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n  \n    return { days, hours, minutes, seconds };\n  }\n  // Функція для додавання нуля перед числом, якщо воно менше двох символів\nfunction addLeadingZero(value){\n    return String(value).padStart(2, '0');\n}\n\n  console.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\n  console.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\n  console.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n  "],"names":["datetimePicker","dataStart","elements","userSelectedDate","countdownInterval","options","selectedDates","iziToast","flatpickr","timeLeft","days","hours","minutes","seconds","convertMs","addLeadingZero","ms","value"],"mappings":"svBAkFA,MAAMA,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAY,SAAS,eAAe,YAAY,EAChDC,EAAW,CACb,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EAEA,IAAIC,EAAmB,KACnBC,EAAoB,KAGxB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBH,EAAmBG,EAAc,CAAC,EACjC,CAACH,GAAoBA,GAAoB,IAAI,MAC9CI,EAAS,QAAQ,CACT,QAAQ,oCAExB,CAAiB,EACTN,EAAU,SAAW,IAErBA,EAAU,SAAW,EAExB,CACL,EAEEO,EAAUR,EAAgBK,CAAO,EAEjCJ,EAAU,iBAAiB,QAAS,IAAM,CACxC,GAAI,CAACE,GAAoBA,GAAoB,IAAI,KAAQ,CACrDI,EAAS,QAAQ,CACb,QAAQ,oCACpB,CAAS,EACF,MACF,CAEL,cAAcH,CAAiB,EAE/BA,EAAoB,YAAY,IAAM,CAElC,MAAMK,EAAWN,EADL,IAAI,KAGlB,GAAGM,GAAY,EAAI,CACjB,cAAcL,CAAiB,EAC/BH,EAAU,SAAW,GACrBD,EAAe,SAAW,GAC1B,MACD,CAED,KAAM,CAAC,KAAAU,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAIC,EAAUL,CAAQ,EAE1DP,EAAS,KAAK,YAAca,EAAeL,CAAI,EAC/CR,EAAS,MAAM,YAAca,EAAeJ,CAAK,EACjDT,EAAS,QAAQ,YAAca,EAAeH,CAAO,EACrDV,EAAS,QAAQ,YAAca,EAAeF,CAAO,CACnD,EAAE,GAAI,EACVZ,EAAU,SAAW,GACrBD,EAAe,SAAW,EAC1B,CAAG,EAEC,SAASc,EAAUE,EAAI,CAQvB,MAAMN,EAAO,KAAK,MAAMM,EAAK,KAAG,EAE1BL,EAAQ,KAAK,MAAOK,EAAK,MAAO,IAAI,EAEpCJ,EAAU,KAAK,MAAQI,EAAK,MAAO,KAAQ,GAAM,EAEjDH,EAAU,KAAK,MAASG,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAEH,SAASE,EAAeE,EAAM,CAC1B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACxC,CAEE,QAAQ,IAAIH,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}